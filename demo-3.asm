.model small
.stack 100h
.data
.code
start:
    ; Перемикаємося в VESA графічний режим 640x480 з 256 кольорами
    mov ax, 4F02h          ; Функція VESA - Set VBE Mode
    mov bx, 101h           ; Режим 101h - 640x480x256
    int 10h                ; Виклик переривання BIOS

    ; Перевірка на помилку
    cmp ax, 004Fh          ; Перевіряємо, чи було успішно виконано команду
    jne error              ; Якщо ні, то вихід з помилкою

    ; Малювання пікселів усіх кольорів уздовж горизонтальної лінії
    mov cx, 0              ; X-координата
    mov dx, 240            ; Y-координата (середина екрану по вертикалі)
    mov al, 0              ; Перший колір (0 - чорний)

draw_pixels:
    mov ah, 0Ch            ; Функція BIOS для малювання пікселя
    int 10h                ; Виклик переривання BIOS

    inc cx                 ; Збільшуємо X-координату для наступного пікселя
    inc al                 ; Збільшуємо значення кольору

    cmp al, 255            ; Перевіряємо, чи досягнуто останній колір
    jbe draw_pixels        ; Якщо не досягнуто, продовжуємо малювати

    ; Очікування натискання клавіші
    mov ah, 00h
    int 16h

    ; Повернення в текстовий режим 80x25
    mov ax, 0003h
    int 10h

    ; Завершення програми
    mov ax, 4C00h
    int 21h

error:
    ; Якщо VESA режим не підтримується, виходимо з помилкою
    mov ax, 4C01h          ; Завершення програми з кодом помилки 1
    int 21h
end start
